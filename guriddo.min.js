/*! guriddo 2014-02-25 */
!function(){var a,b=function(a,b){return function(){return a.apply(b,arguments)}};a=function(){function a(a,c,d,e){this.container=a,this.data=c,this.columns=d,this.options=e,this.autosizeColumns=b(this.autosizeColumns,this),this.hookEvents=b(this.hookEvents,this),this.trigger=b(this.trigger,this),this.updateMainWidth=b(this.updateMainWidth,this),this.getDomOuterWidth=b(this.getDomOuterWidth,this),this.getCombinedColumnsMinWidth=b(this.getCombinedColumnsMinWidth,this),this.getCombinedColumnsWidth=b(this.getCombinedColumnsWidth,this),this.updateFrozenWidth=b(this.updateFrozenWidth,this),this.initWithFrozen=b(this.initWithFrozen,this),this.setColumns=b(this.setColumns,this),this.el=$(a),this.options.frozenColumn?this.initWithFrozen():this.initWithoutFrozen()}var c;return a.prototype.frozenClassName="guriddo-frozen",a.prototype.frozenShadowClassName="guriddo-frozen-shadow",a.prototype.mainClassName="guriddo-main",a.prototype.widgetClassName="guriddo-widget",a.prototype.slickGridVpClassName="slick-viewport",c={},a.prototype.setColumns=function(a){var b,c,d,e,f,g=this;for(this.columns=a,this.columnsFrozen=[],this.columnsMain=[],f=this.columns,c=function(a){return 0===a.grid?(a.grid=0,g.columnsFrozen.push(a)):(a.grid=1,g.columnsMain.push(a))},d=0,e=f.length;e>d;d++)b=f[d],c(b);return null!=this.gridFrozen&&(this.gridFrozen.setColumns(this.columnsFrozen),this.updateFrozenWidth()),null!=this.gridMain&&this.gridMain.setColumns(this.columnsMain),[this.columnsFrozen,this.columnsMain]},a.prototype.getColumns=function(){return[].concat(this.gridFrozen.getColumns(),this.gridMain.getColumns())},a.prototype.invalidateRows=function(a){return this.gridFrozen.invalidateRows(a),this.gridMain.invalidateRows(a)},a.prototype.render=function(){return this.gridFrozen.render(),this.gridMain.render()},a.prototype.updateRowCount=function(){return this.gridFrozen.updateRowCount(),this.gridMain.updateRowCount()},a.prototype.initWithFrozen=function(){var a,b,c,d,e,f,g,h=this;for(f=this.setColumns(this.columns),this.columnsFrozen=f[0],this.columnsMain=f[1],this.columnsFrozenW=0,g=this.columnsFrozen,c=function(a){return a.width=a.width||100,h.columnsFrozenW=h.columnsFrozenW+parseInt(a.width,10)},d=0,e=g.length;e>d;d++)a=g[d],c(a);return this.el.css("margin-left",this.columnsFrozenW).addClass("guriddo"),this.el.append('<div class="'+this.frozenClassName+'" style="width: '+this.columnsFrozenW+"px; left: -"+this.columnsFrozenW+'px; "></div><div class="'+this.mainClassName+'" style="width: 100%;"></div>'),b=JSON.parse(JSON.stringify(this.options)),b.formatterFactory=this.options.formatterFactory,b.enableColumnReorder=!1,this.gridFrozen=new Slick.Grid(""+this.container+" ."+this.frozenClassName,this.data,this.columnsFrozen,b),this.gridMain=new Slick.Grid(""+this.container+" ."+this.mainClassName,this.data,this.columnsMain,this.options),this.$frozen=$(""+this.container+" ."+this.frozenClassName),this.$main=$(""+this.container+" ."+this.mainClassName),this.$frozenVp=this.$frozen.find("."+this.slickGridVpClassName),this.$mainVp=this.$main.find("."+this.slickGridVpClassName),this.$frozenVpCv=this.$frozenVp.find(".grid-canvas"),this.$mainVpCv=this.$mainVp.find(".grid-canvas"),this.$frozenVp.css("overflow","hidden"),this.$mainVp.scroll(function(a){var b;return b=a.target.scrollLeft,b>0?h.$frozen.addClass(h.frozenShadowClassName):h.$frozen.removeClass(h.frozenShadowClassName),h.$frozenVp.scrollTop(a.target.scrollTop)}),this.$frozenVp.scroll(function(a){return h.$mainVp.scrollTop(a.target.scrollTop)}),this.hookEvents(),this.gridFrozen.onHeaderMouseEnter.notify=function(){return h.$frozen.find(".slick-resizable-handle:last-child").on("drag",function(){return h.updateFrozenWidth()})},this.gridFrozen.onColumnsResized.notify=function(){return h.updateFrozenWidth()}},a.prototype.updateFrozenWidth=function(){var a,b,c,d,e,f,g=this;for(b=this.$frozen.find(".slick-header-column"),c=this.$frozen.find(".slick-header-column").outerWidth(),this.columnsFrozenW=0,d=function(a){return g.columnsFrozenW=g.columnsFrozenW+parseInt($(a).outerWidth(),10)},e=0,f=b.length;f>e;e++)a=b[e],d(a);return this.$frozen.css({left:"-"+this.columnsFrozenW+"px",width:""+this.columnsFrozenW+"px"}),this.el.css("margin-left",this.columnsFrozenW)},a.prototype.getCombinedColumnsWidth=function(a){return _(a).pluck("width").reduce(function(a,b){return a+b})},a.prototype.getCombinedColumnsMinWidth=function(a){return _(a).pluck("minWidth").reduce(function(a,b){return a+b})},a.prototype.getDomOuterWidth=function(a){return _(a).map(function(a){return a.offsetWidth}).reduce(function(a,b){return a+b})},a.prototype.updateMainWidth=function(){var a,b,c,d,e,f,g,h;return c=function(){var a,b;return a=$("<div>").css({visibility:"hidden",width:100,overflow:"scroll"}).appendTo("body"),b=$("<div>").css({width:"100%"}).appendTo(a).outerWidth(),a.remove(),100-b},e=this.$main.find(".slick-header-column"),g=this.getDomOuterWidth(e),h=this.$main.outerWidth()-c(),d=!1,h>g?(a=h-g,b=Math.floor(a/e.length),_(this.columnsMain).each(function(a){var c;return c=a.width+b,a.width!==c?(d=!0,a.width+=b):void 0})):g>h&&(f=this.getCombinedColumnsMinWidth(this.columnsMain),a=h-f,b=Math.floor(a/e.length),_(this.columnsMain).each(function(a){var c;return c=a.minWidth+b,a.width!==c?(d=!0,a.width=a.minWidth+b):void 0})),d?this.gridMain.setColumns(this.columnsMain):void 0},a.prototype.trigger=function(a,b,c){return c=c||new Slick.EventData,b=b||{},a.notify(b,c,this)},a.prototype.hookEvents=function(){var a,b,c,d,e,f,g,h,i,j,k,l,m=this;for(e=this,b=["onColumnsReordered","onColumnsResized","onSort"],d={},f=function(a){return d[a]=new Slick.Event},g=0,i=b.length;i>g;g++)a=b[g],f(a);for($.extend(this,d),k=[this.gridFrozen,this.gridMain],l=[],h=0,j=k.length;j>h;h++)c=k[h],l.push(function(c){var d,f,g;for(g=[],d=0,f=b.length;f>d;d++)a=b[d],g.push(function(a){return c[a].notify=function(b,c){return m.trigger(e[a],b,c)}}(a));return g}(c));return l},a.prototype.autosizeColumns=function(){return this.$mainVpCv.width()<this.$mainVp.width()?(this.gridMain.resizeCanvas(),this.gridMain.autosizeColumns()):void 0},a}(),$.extend(!0,window,{Guriddo:{WithFrozen:a}})}.call(this);
/*
//@ sourceMappingURL=guriddo.min.js.map
*/